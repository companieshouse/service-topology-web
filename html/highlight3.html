<head>
  <style> body { margin: 0; } </style>

  <script src="//unpkg.com/3d-force-graph"></script>
  <!--<script src="../../dist/3d-force-graph.js"></script>-->
  <script src="//unpkg.com/three"></script>


  <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
  <script src="semantic/dist/semantic.min.js"></script>

</head>

<body>

  <div class="menu" style="margin: 0; background-color: black;">
    <div class="ui inverted menu">
  	  <div class="ui dropdown item">
  	    Home
  	    <i class="dropdown icon"></i>
  	    <div class="menu">
  	      <a class="active item">Search</a>
  	      <a class="item">Add</a>
  	      <a class="item">Remove</a>
  	    </div>
  	  </div>
  	  <a class="item">
  	    <i class="grid layout icon"></i> Browse
  	  </a>
  	  <a class="item">
  	    Messages
  	  </a>
  	  <div class="ui dropdown item">
  	    More
  	    <i class="dropdown icon"></i>
  	    <div class="menu">
  	      <a class="item"><i class="edit icon"></i> Edit Profile</a>
  	      <a class="item"><i class="globe icon"></i> Choose Language</a>
  	      <a class="item"><i class="settings icon"></i> Account Settings</a>
  	    </div>
  	  </div>
  	</div>
  </div>

	<script type="text/javascript">
	  $('.ui.dropdown').dropdown({on: 'hover'});
	</script>

  <div id="3d-graph"></div>
  <script>
    const gData = {
      "nodes": [
          {"id":0,"name": "zzzzz","val": 1},
          {"id":1},
          {"id":2}
        ],
      "links":
        [
          {"source":1,"target":0},
          {"source":2,"target":0}
        ]
    };

// cross-link node objects
gData.links.forEach(link => {
  const a = gData.nodes[link.source];
  const b = gData.nodes[link.target];
  !a.neighbors && (a.neighbors = []);
  !b.neighbors && (b.neighbors = []);
  a.neighbors.push(b);
  b.neighbors.push(a);

  !a.links && (a.links = []);
  !b.links && (b.links = []);
  a.links.push(link);
  b.links.push(link);
});

    const highlightNodes = new Set();
    const highlightLinks = new Set();
    let hoverNode = null;

    const Graph = ForceGraph3D()
      (document.getElementById('3d-graph'))
        .graphData(gData)
        .nodeColor(node => highlightNodes.has(node) ? node === hoverNode ? 'rgb(255,0,0,1)' : 'rgba(255,160,0,0.8)' : 'rgba(0,255,255,0.6)')
        // .nodeRelSize(1)

        .linkWidth(link => highlightLinks.has(link) ? 4 : 1)
        .linkDirectionalParticles(link => highlightLinks.has(link) ? 4 : 0)
        .linkDirectionalParticleWidth(4)
        .onNodeHover(node => {
          // no state change
          if ((!node && !highlightNodes.size) || (node && hoverNode === node)) return;

          highlightNodes.clear();
          highlightLinks.clear();
          if (node) {
            highlightNodes.add(node);
            node.neighbors.forEach(neighbor => highlightNodes.add(neighbor));
            node.links.forEach(link => highlightLinks.add(link));
          }

          hoverNode = node || null;

          updateHighlight();
        })
        .onLinkHover(link => {
          highlightNodes.clear();
          highlightLinks.clear();

          if (link) {
            highlightLinks.add(link);
            highlightNodes.add(link.source);
            highlightNodes.add(link.target);
          }

          updateHighlight();
        });

    function updateHighlight() {
      // trigger update of highlighted objects in scene
      Graph
        .nodeColor(Graph.nodeColor())
        .linkWidth(Graph.linkWidth())
        .linkDirectionalParticles(Graph.linkDirectionalParticles());
    }
  </script>
</body>
